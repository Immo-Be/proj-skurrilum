<header class="site-header">
  {{ $logo := resources.Get "images/logo.png" }}
  <div class="header-inner">
    <a href="{{ .Site.Home.RelPermalink }}" class="logo">
      <img src="/images/logo.svg" alt="Logo" style="width: 51px; height: 24px" />
    </a>

    <button class="menu-toggle" aria-controls="main-menu" aria-expanded="false">
      <span class="sr-only">Toggle menu</span>
            <svg class="hamburger-icon w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16m-7 6h7"></path></svg>
      <svg class="close-icon w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>
    </button>
  </div>

  <nav class="main-nav" role="navigation">
    <ul id="main-menu" class="main-menu">
      {{ $currentPage := . }}
      {{ range .Site.Menus.main }}
        <li{{ if .HasChildren }} class="has-dropdown"{{ end }}>
          {{ $isActive := "" }}
          {{ if .Page }}
            {{ if eq $currentPage.RelPermalink .Page.RelPermalink }}
              {{ $isActive = " active" }}
            {{ end }}
          {{ else if eq $currentPage.RelPermalink .URL }}
            {{ $isActive = " active" }}
          {{ end }}
          <a href="{{ if .Page }}{{ .Page.RelPermalink }}{{ else }}{{ .URL | default "#" }}{{ end }}" class="nav-link{{ $isActive }}">
            {{ .Name }}
          </a>
          {{ if .HasChildren }}
            <ul class="dropdown">
              {{ range .Children }}
                <li>
                  {{ $isChildActive := "" }}
                  {{ if .Page }}
                    {{ if eq $currentPage.RelPermalink .Page.RelPermalink }}
                      {{ $isChildActive = " active" }}
                    {{ end }}
                  {{ end }}
                  <a href="{{ if .Page }}{{ .Page.RelPermalink }}{{ else }}{{ .URL | default "#" }}{{ end }}" class="nav-link{{ $isChildActive }}">
                    {{ .Name }}
                  </a>
                </li>
              {{ end }}
            </ul>
          {{ end }}
        </li>
      {{ end }}
    </ul>
      <div class="lang-switcher has-lang-dropdown">
        <a href="#" class="current-lang-toggle">
          <img
            src="/images/flags/{{ .Site.Language.Lang }}.svg"
            alt="{{ .Site.Language.LanguageName }} Flag"
            class="flag-icon"
          />
          <span class="dropdown-arrow"></span>
        </a>
        <ul class="lang-dropdown">
          {{ range .Site.Languages }} {{ if ne .Lang $.Site.Language.Lang }} {{ $targetLang := .Lang
          }} {{ $translatedPage := "" }} {{ range $.Page.AllTranslations }} {{ if eq .Lang
          $targetLang }}{{ $translatedPage = . }}{{ end }} {{ end }} {{ if $translatedPage }}
          <li>
            <a href="{{ $translatedPage.RelPermalink }}">
              <img
                src="/images/flags/{{ .Lang }}.svg"
                alt="{{ .LanguageName }} Flag"
                class="flag-icon"
              />
            </a>
          </li>
          {{ end }} {{ end }} {{ end }}
        </ul>
      </div>
  </nav>
</header>
